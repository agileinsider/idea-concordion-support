<idea-plugin version="2">
  <id>org.concordion.plugin.idea.lang</id>
  <name>Concordion support</name>
  <version>0.1</version>
  <vendor email="gmandnepr@gmail.com" url="https://github.com/concordion/idea-concordion-support">Ievgen Degtiarenko</vendor>

  <description><![CDATA[
<p>
    <br/>This plugin provides support for <a href="http://concordion.org/">http://concordion.org/</a> (2.0) testing framework.
    <br/><b>Plugin homepage</b>
    <br/><a href="https://github.com/concordion/idea-concordion-support">https://github.com/concordion/idea-concordion-support</a>
    <br/>Issues, feature proposals and tested pull requests are welcome
</p>
    ]]></description>

  <change-notes><![CDATA[
<p>
    Version 0.1<br/>
    <ul>
        <li>Autocomplete with concordion commands</li>
        <li>Autocomplete with fields and methods of concordion runner class</li>
        <li>Navigation between concordion html spec and test fixture using concordion icon and navigation action (ctrl + shift + s)</li>
        <li>Ctrl+click navigation and usages search for concordion expressions</li>
        <li>Quick fields and methods creation from usages</li>
        <li>Renaming support</li>
    </ul>
</p>
    ]]></change-notes>

  <idea-version since-build="133"/>

  <extensions defaultExtensionNs="com.intellij">
    <fileTypeFactory implementation="org.concordion.plugin.idea.lang.ConcordionFileTypeFactory"/>
    <lang.parserDefinition language="Concordion" implementationClass="org.concordion.plugin.idea.lang.ConcordionParserDefinition"/>
    <multiHostInjector implementation="org.concordion.plugin.idea.lang.ConcordionLanguageInjector"/>
    <lang.syntaxHighlighterFactory key="Concordion" implementationClass="org.concordion.plugin.idea.formatter.ConcordionSyntaxHighlighterFactory"/>

    <psi.referenceContributor language="Concordion" implementation="org.concordion.plugin.idea.reference.ConcordionReferenceContributor"/>

    <annotator language="Concordion" implementationClass="org.concordion.plugin.idea.annotator.UnresolvedMemberAnnotator"/>

    <completion.contributor language="HTML" implementationClass="org.concordion.plugin.idea.autocomplete.ConcordionCommandsCompletionContributor"/>
    <completion.contributor language="HTML" implementationClass="org.concordion.plugin.idea.autocomplete.ConcordionNonExpressionCompletionContributor"/>
    <completion.contributor language="Concordion" implementationClass="org.concordion.plugin.idea.autocomplete.ConcordionExpressionCompletionContributor"/>

    <localInspection language="JAVA"
                     id="testFixtureIsNotAnnotatedWithConcordionRunner"
                     groupName="Concordion"
                     displayName="Test fixture is not annotated with @RunWith(ConcordionRunner.class)"
                     enabledByDefault="true"
                     level="ERROR"
                     implementationClass="org.concordion.plugin.idea.inspection.TestFixtureIsNotAnnotatedWithConcordionRunner"/>
    <localInspection language="HTML"
                     id="usingFullOgnlExpression"
                     groupName="Concordion"
                     displayName="Using FullOGNL expression while test fixture is not annotated with @FullOGNL"
                     enabledByDefault="true"
                     level="ERROR"
                     implementationClass="org.concordion.plugin.idea.inspection.FullOgnlRequired"/>
    <localInspection language="Concordion"
                     id="usingMapKeyAsField"
                     groupName="Concordion"
                     displayName="Using map key as a field"
                     enabledByDefault="true"
                     level="WARNING"
                     implementationClass="org.concordion.plugin.idea.inspection.UsingMapKeyAsField"/>
    <localInspection language="Concordion"
                     id="usingUndeclaredVariable"
                     groupName="Concordion"
                     displayName="Using undeclared variable"
                     enabledByDefault="true"
                     level="WARNING"
                     implementationClass="org.concordion.plugin.idea.inspection.UsingUndeclaredVariable"/>

    <codeInsight.lineMarkerProvider language="HTML" implementationClass="org.concordion.plugin.idea.marker.HtmlSpecLineMarkerProvider"/>
    <codeInsight.lineMarkerProvider language="JAVA" implementationClass="org.concordion.plugin.idea.marker.JavaRunnerLineMarkerProvider"/>

    <projectService serviceInterface="org.concordion.plugin.idea.ConcordionNavigationService"
                    serviceImplementation="org.concordion.plugin.idea.ConcordionNavigationService"/>
  </extensions>

  <application-components>
  </application-components>

  <project-components>
  </project-components>

  <actions>
    <action id="concordionSpecFilesNavigation"
            text="Navigate between concordion spec and fixture"
            description="Navigate between concordion spec and fixture"
            class="org.concordion.plugin.idea.action.NavigateBetweenConcordionSpecFiles">
      <keyboard-shortcut keymap="$default" first-keystroke="ctrl shift S"/>
    </action>
  </actions>
</idea-plugin>